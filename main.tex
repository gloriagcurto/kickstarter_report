%\documentclass[a4paper]{article}

\documentclass{article}
\usepackage[a4paper]{geometry}

\usepackage[utf8]{inputenc}
\usepackage{import}
\usepackage{url}
\usepackage{graphicx}
\usepackage{float} 
\usepackage{xcolor}
\usepackage{subfigure}
\usepackage{caption}
\usepackage{listings} % JSON listing
\usepackage{eurosym}
\usepackage{parskip} % Do not indent the beginning of each paragraph
\usepackage{comment}

%\renewcommand{\sectionname}{Lecture} % Redefine "chapter" to a different text

\newcommand{\ToDo}[1]{\textcolor{magenta}{\textbf{[ToDo]} \textbf{#1}}}
\newcommand{\gloria}[1]{\textcolor{blue}{[Gloria] {#1}}}


\title{Classification of Kickstarter's successful or failed projects based on data crawled by a scraper robot (Web Robots)}
\author{Gloria GONZ√ÅLEZ CURTO}
\date{\today}

\begin{document}

\maketitle

\tableofcontents


\section{Summary}
\label{ref:sum}
The aim of this project is to classify and ultimately predict the success or failure of a kickstarter fund rising campaign based on data monthly crawled from the kickstarter.com web site by a scraper robot (webrobots.io).

\section{Problem definition and background}
{Kickstarter is an American corporation with a public benefit status launched in 2009 in the United States. The company initiated its international expansion in 2012. The kickstarter platform is open to backers from anywhere in the world and to creators from many countries \ref{subsec:EDA}.

Kickstarter maintains a global crowdfunding platform focused on creativity. Project creators choose a deadline and a minimum funding goal. If the goal is not met by the deadline, no funds are collected and the project is considered failed. Project backers usually receive rewards in exchange for their pledges.
Once a project collects enough pledges to bypass the goal before a deadline stablished by the creator, its state changes to successful. Only at that moment pledges are collected from backers. From that point onward, there is no guarantee for project delivery. Kickstarter advises backers to use their own judgment on supporting a project. They also warn project leaders that they could be liable for legal damages from backers for failure to deliver on promises.
 
On one hand, from a backer point of view, it would be interesting to have an analytic model to help with the decision of whether to pledge for a project or not. On the other hand, from the project creators, it would be interesting to have a guide to help them optimize their chances of success.

\section{Data description and pre-processing}
\label{sec:data_desc}

Raw data were collected from \url{https://webrobots.io/kickstarter-datasets/} in CSV format.  The downloaded data correspond to a crawl executed on February 13 2020. Raw data are composed by 57 CSV files with 3500 to 4000 rows each. The raw original variables are:
\begin{itemize}

    \item \textbf{backers\_count}: integer representing how many people supported the project (backers).
    \item \textbf{blurb}: textual description of the project (around 150-200 characters).
    \item \textbf{category}: JSON-encoded description on the kickstarter's fixed categories: id, name, slug, position, parent\_id, parent\_name, color, urls.

    \item \textbf{converted\_pledged\_amount}: pleged amount converted to USD.
    \item \textbf{country}: country initials (i.e: FR for France):
    \item \textbf{country\_displayable\_name}: country name.
    \item \textbf{created\_at}: date on Unix time format.
    \item \textbf{creator}: JSON-encoded description on project's creator. id, name, is\_registered, chosen\_currency, is\_superbacker, avatar, small, medium, url\_web, url\_api. 
    \item \textbf{currency}: currency acronym.
    \item \textbf{currency\_symbol}.
    \item \textbf{currency\_trailing\_code}: boolean variable.
    \item \textbf{current\_currency}: USD.
    \item \textbf{deadline}: crowdfunding deadline in Unix time established by the project's creator.
    \item \textbf{disable\_communication}: boolean variable.
    \item \textbf{friends}.
    \item \textbf{fx\_rate}: conversion rate.
    \item \textbf{goal}: fund rising goal in creator's fixed currency.
    \item \textbf{id}: project identifier.
    \item \textbf{is\_backing}.
    \item \textbf{is\_starrable}.
    \item \textbf{is\_starred}.
    \item \textbf{launched\_at}: launch date on Unix time format.
    \item \textbf{location}: JSON-encoded description of the project's creator location: id, name, slug, short\_name, displayable\_name, localized\_name, country, state, type, is\_root, expanded\_country, url\_web, url\_location, url\_api\_nearby\_projects.
    \item \textbf{name}: project's name.
    \item \textbf{permissions}.
    \item \textbf{photo}: JSON-encoded description on project's photos: key, full, ed, med, little, small, thumb, 1024x576, 1536x864.
    \item \textbf{pledged}: pledged amount in original country currency.
    \item \textbf{profile}: JSON-encoded description on project's profile: id, project\_id, state, state\_changed\_at, name, blurb, background\_color, text\_color, link\_background\_color, link\_text\_color, link\_text, link\_url, show\_feature\_image, background\_image\_opacity, should\_show\_feature\_image\_section, feature\_image\_attributes, image\_urls. 
    \item \textbf{slug}: small textual description with - as spacers.
    \item \textbf{source\_url}: url pointing to project's category site on kickstarter.
    \item \textbf{spotlight}: boolean representing if the project was featured on kickstarter web site.
    \item \textbf{staff\_pick}: boolean representing if the project was picked by kickstarter staff.
    \item \textbf{state}: project's state initialy composed by 5 categories (successful, failed, canceled, suspended and live.
    \item \textbf{state\_changed\_at}: date in Unix time format.
    \item \textbf{static\_usd\_rate}: static rate for currency conversion into USD.
    \item \textbf{urls}: JSON-encoded description containing urls: project, rewards.
    \item \textbf{usd\_pledged}.
    \item \textbf{usd\_type}: domestic.
    
\end{itemize} 

\subsection{Data pre-processing}
\label{subsec:data_prepro}
The following steps were followed to obtain a clean dataset for model training or EDA from raw data.
\begin{itemize}
    \item \textbf{Join CSV files}.
Raw data contain ambigous JSON-encoded fields that induce errors while parsing. To avoid those errors, ambigous JSON-encoded containing rows were filtered out while joining data into an unique file (\emph{pre\_join.py}).

    \item \textbf{Deserialize JSON-encoded columns}.
Columns and rows with missing information were dropped ("friends", "is\_backing", "is\_starred", "permissions") from raw data before JSON deserialization.
JSON-encoded columns (\emph{'category', 'creator', 'location', 'photo', 'profile', 'urls'}) were isolated from the rest of raw data and deserialized using a custom made function (\emph{deserialize\_in\_batch}) by means of the json\_normalize method from the pandas package and loads from the json package. The implementation can be accesed at \emph{pre\_decode\_JSON.py}).

    \item \textbf{Selection and pre-processing of deserialized variables}.
    The implementation of the following steps can be accesed at \emph{pre\_deserialized\_to\_one\_hot\_encoding.py}.
    \begin{itemize}
 
        \item Drop category\_slug because it contains partial redundant information with category\_name and category\_parent\_name.
        \item Fill category\_parent\_name missing values with their corresponding category\_name value.
        \item Exploration of location related variables: location\_localized\_name, location\_country, and location\_expanded\_country
	\begin{itemize}
            \item location\_localized\_name contains no missing values and 12977 unique values. Such a number of levels for a categorical variable might not be informative. Drop location\_localized\_name.
            \item location\_country and location\_expanded\_country are redundant. Drop location\_country because is less human readable.
	\end{itemize}
	\item Profile related variables. Codification of profile related variables into a binary code reflecting the involvement of the project creator in the generation of a profile.
	\begin{itemize}
            \item Re-codification of categorical binary variables:
	    profile\_state: "inactive"=0, "active"=1
            profile\_show\_feature\_image: False=0, True=1
            profile\_should\_show\_feature\_image\_section: False=0, True=1

            \item The rest of the profile related columns are going to be coded in a binary choice variable (missing value = 0= , variable contains a project creator provided value =1). The following columns were processed: 'profile\_name', 'profile\_blurb', 'profile\_background\_color', 'profile\_text\_color', 'profile\_link\_background\_color', 'profile\_link\_text\_color', 'profile\_link\_text', 'profile\_link\_url'.
        \end{itemize}
	\item One hot encoding of categorical variables while keeping the original columns for EDA, see section \ref{subsec:EDA}.
        The variables 'category\_name', 'category\_parent\_name', 'location\_expanded\_country' were codified using pd.get\_dummies and the argument drop\_first was set to True.
   \end{itemize}
   \item \textbf{Change date format and compute date derived variables}.
    The implementation can be accesed at \emph{pre\_date\_format\_and\_derived\_variables.py}.
    
    First, date and time coding variables ('created\_at', 'deadline', 'launched\_at', 'state\_changed\_at') in the raw data are in Unix time format and need to be transformed into datetime. The following variables where computed from the original ones: weekday columns for each date variable, month columns for each date variable, year columns for each date variable.
    
    'initial\_found\_rising\_duration' was computed as the difference in days between 'deadline' and 'launched\_at'.
    
    'found\_rising\_duration' was computed as the difference in days between 'state\_changed\_at' and 'launched\_at'.
    
    'project\_set\_up\_duration' was computed as the difference in days between 'launched\_at' and 'created\_at'.
    
    Date variables were prunned before model training to remove the 'state\_changed\_at' derived ones.
    
    \item \textbf{Currency derived variables pre-processing}.
    The implementation can be accesed at \emph{pre\_currency\_and\_other\_variables.py}.
    
    The following original variables were dropped due to redundancies or because they are not informative for the model: 'current\_currency', 'currency\_trailing\_code', 'fx\_rate', 'converted\_pledged\_amount', 'pledged', 'slug', 'usd\_type'.
    
    The variable 'usd\_goal' was computed by multiplication of the variables 'goal' 'and 'static\_usd\_rate' to able to compare the pledge goals for all the projects. 'goal' and 'static\_usd\_rate' were dropped after the generation of 'usd\_goal'.
    
    The variable 'is\_starrable' was also dropped, because of lack of relevance.
    
    The variables 'disable\_communication', 'spotlight' and 'staff\_pick' were recodified by replacing False=0 and True=1.
    
    The variable currency was dummified using get\_dummies (the original varaible was kept for visualization purpose).

    \item \textbf{State pre-processing (target variable)}.
    The implementation can be accesed at \emph{pre\_currency\_and\_other\_variables.py}.
    
    State is the target variable for classification. The raw variable is a categorical variable with 5 levels('successful', 'failed', 'live', 'canceled', 'suspended') and  no missing values.
    
    The variable 'state\_group' was generated by grouping the canceled and suspended projects into 'failed'. It contains then 3 distinct levels ('successful', 'failed' and 'live').
    
    The variable 'state\_code' was generated by dummification from 'state\_grouped' (failed = 0, successful=1, live=2). There are 114940 successful projects, 84311 failed projects and 6651 live projects.

   \item \textbf{Join the JSON decoded variables to the rest of the data}.
   The implementation can be accesed at \emph{pre\_join\_and\_drop\_live\_state.py}.
   
    \item \textbf{Drop rows corresponding to projects on a "live" state}.
    The implementation can be accesed at \emph{pre\_join\_and\_drop\_live\_state.py}.
    
    \item \textbf{Evaluate and drop duplicate rows}.
    The implementation can be accesed at \emph{pre\_duplicates.py}.
    21392 duplicate rows were detected and removed before further processing using pandas duplicated and drop\_duplicates functions.
    
    \item \textbf{Drop variables carrying low information}.
    Data dimensions at this processing stage was 177859 rows and 428 columns. In the following scripts I will evaluate the informative potential of different subsets of variables and drop the less informative ones in order to reduce the number of binary encoded columns and reduce the overfitting potential.
    
    \begin{itemize}
	\item Generation of the variable 'profile'.
        The implementation can be accesed at \emph{pre\_profile\_pruning.py}.
	
	'profile' was generated by addition of the following columns: 'profile\_ state', 'profile\_ name', 'profile\_ blurb', 'profile\_ background\_ color']+ df['profile\_ text\_ color', 'profile\_ link\_ background\_ color', 'profile\_ link\_ text\_ color', 'profile\_ link\_ text', 'profile\_ link\_ url', 'profile\_ show\_ feature\_ image', 'profile\_ should\_ show\_ feature\_ image\_ section'. It represents an score accounting for profile completeness. The variables were dropped after the score was computed.
        
	The number of columns was reduced to 418.
	
	\item Category name pruning.
	The implementation can be accesed at \emph{pre\_category\_name\_pruning.py }.
	
	'category\_name\_ori' encodes 159 subcategories of the 15 parent categories for kickstarter's projects. In order to evaluate the information content of each of these subcategory levels, plots and percentages of successful projects by secondary category were plotted to decide which one hot encoded columns under category\_name to drop. Only categories with a percentage of successful projects of at least 55\% (project success rate for the data is 53\%) that were informative within their parent categories were kept.
	After verification of plots and percentages, all comic, theater, dance secondary categories contain more successful tha failed projects (Figure1). As they are not more informative than their parent categories, those secondary categories were removed. 
	
	Figure1 (pdfs: nprojects\_ Comics\_ state.pdf, nprojects\_ Dance\_ state.pdf, nprojects\_ Theater\_ state.pdf)
	
	The following subcategories were kept: 'Anthologies', 'Letterpress', "Children's Books", 'Art Books', 'Publishing', 'Literary Spaces', 'Fiction', 'Nonfiction', 'Playing Cards', 'Video Games', 'Tabletop Games', 'Games', 'Puzzles', 'Journalism', 'Public Art', 'Illustration', 'Painting', 'Art', 'Social Practice', 'Shorts', 'Narrative Film', 'Documentary', 'Webseries', 'Film \& Video', 'Crafts', 'Photography', 'Product Design', 'Typography', 'Design', 'Classical Music', 'Country \& Folk', 'Indie Rock', 'Pop', 'Music', 'Jazz', 'Comedy', 'Rock', 'Chiptune', 'Apparel', 'Accessories', 'Fashion', 'Gadgets', 'Hardware', 'Technology'.
	
	The number of columns was reduced to 304.
	
        \item Country pruning.
        The implementation can be accesed at \emph{pre\_country\_pruning.py}.  
	
	Projects in the dataset come from 198 countries. In order to reduce the number of variables, I performed plots and percentages of successful projects by country and counts of projects by country. Only countries with more than 55\% of successful projects and more than 50 projects were kept (United Kingdom, Hong Kong, Japan, Singapore, China, Poland, Israel, Taiwan, Czech Republic, Greece, Indonesia, Argentina, Kenya, Iceland, Ghana, Portugal, Slovenia, Finland).
	
	The number of columns was reduced to 125.
	
	\item  Currency pruning.
	The implementation can be accesed at \emph{pre\_currency\_pruning.py }.
	
	Currency encodes 14 different levels. Plots and percentages of succesfull projects were performed for 'currency\_orig'. Currencies with more than 55\% of successful projects were retained (GBP, HKD, SGD, JPY) and compared to the retained countries. All currency levels were dropped because the selected currencies correspond to countries that already selected and the information was redundant.
	
	The number of columns was reduced to 112.
        
    \end{itemize}
    \item \textbf{Drop rows with text in other languages than English}.
    The implementation can be accesed at \emph{pre\_words.py}.
    The variable
    
pre\_year\_EDA.py
    pre\_data\_prep\_temporal\_and\_classification.py  
    
    \item \textbf{Text-mining pre-processing}.
    The implementation can be accesed at \emph{pre\_text\_mining.py}.
    \item \textbf{Clean up of the modeling data}.
    The implementation can be accesed at \emph{pre\_data\_prep\_temporal\_and\_classification.py}.
    \item \textbf{Clean up for the exploratory data visualization}.
    The implementation can be accesed at \emph{pre\_data\_prep\_EDA.py}.
     
  

    pre\_split\_train\_test.py                         
    pre\_words.py
    pre\_text\_mining.py
    pre\_text\_mining\_ts.py
    pre\_data\_model\_test.py    
    pre\_data\_model.py 
\end{itemize}

\subsection{Exploratory data analysis}
\label{subsec:EDA}
                   
EDA\_profiling.py                              
EDA\_tt\_before\_split.py                        
EDA\_tt\_profile.py                             
EDA\_tt\_ts\_split.py
\section{Data modeling}
\label{sec:model}
Spotlight allows creators to make a home for their project on Kickstarter after they‚Äôve been successfully funded. Each creator can take control of their page and build a customized, central hub for news, updates, links to finished work, and anything else they want the world to know about their project.
train\_wo\_spotlight.py
training\_wo\_ts.py
train\_first\_model\_wo\_ts.py
\section{Model interpretation}
\label{sec:interp}
EDA\_features\_important.py 
\section{Conclusions}
\label{sec:conclu}

\begin{comment}
\begin{figure}[!ht]
\centering
\includegraphics[width=0.8\linewidth]{RRPR_2016/images/architecture/architecture.pdf}
\caption{IPOL as a modular system.} 
\label{fig:architecture}
\end{figure}
\end{comment}

\begin{comment}
\begin{itemize}
    \item Demos
    \item Applications
\end{itemize}
\end{comment}

\bibliographystyle{unsrt} % Sorted references: [1], [2], ..
\bibliography{bibliography}

\end{document}
